<div class="container">

  <div>
    <button [disabled]="!selection.hasValue()" (click) = "deleteSelected()" title="Delete" mat-icon-button>
      <i class="material-icons">
        delete_forever
      </i>
    </button>
    <button [disabled]="!selection.hasValue()" title="Copy" mat-icon-button>
      <i class="material-icons">
        file_copy
      </i>
    </button>
    <button [disabled]="!selection.hasValue()" title="Move" mat-icon-button>
      <i class="material-icons">
        move_to_inbox
      </i>
    </button>
    <button title="Add" (click)="addNewDialog()" mat-icon-button>
      <i class="material-icons">
        add_box
      </i>
    </button>

  </div>
  <div class="example-container mat-elevation-z8">
    <table mat-table [dataSource]="dataSource"  matSort>

      <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()" color="warn">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let element;let row;let i = index">
          <mat-checkbox #box *ngIf="element.type != 'previous'" (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row) : null" [checked]="(checkbox[i] = selection.isSelected(row))"
            [(ngModel)]="checkbox[i]" color="warn">
          </mat-checkbox>
        </td>
      </ng-container>

      <!-- Position Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td (click)="$event.stopPropagation()" [ngClass]="{'checked' : selection.isSelected(row)}" mat-cell
          *matCellDef="let element">

          <button *ngIf="element.type != 'previous'" mat-icon-button>
            <mat-icon style="font-size: 16px;" aria-label="Example icon-button with a heart icon">border_color
            </mat-icon>
          </button>


          <!-- {{element.type != 'previous' ? element.id : ''}}  -->
        </td>
      </ng-container>
      <!-- name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> name </th>
        <td
          style="cursor: pointer;"
          [ngClass]="{'checked' : selection.isSelected(row), 'canStore' : (!selection.isSelected(row) && (element.type == 'folder' || element.type == 'previous'))}"
          [attr.data-id]="element.id" mat-cell (dblclick)="element.type == 'folder' || element.type == 'previous' ? getDashBoardManagementData(element.id) : openDashboard(element.id) "
          *matCellDef="let element;let row"> {{element.name}} </td>
      </ng-container>

      <!-- type Column -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> type </th>
        <td [ngClass]="{'checked' : selection.isSelected(row)}" mat-cell *matCellDef="let element;let row">
          <i *ngIf="element.type != 'previous'" class="material-icons">
            {{element.type}}
          </i>
          <span style="    vertical-align: super;
                  padding: 10px 5px;
                  margin-top: 5px;">{{element.type != 'previous' ? element.type : ''}} </span>

        </td>
      </ng-container>

      <!-- Editor Column -->
      <ng-container matColumnDef="editor">
        <th mat-header-cell *matHeaderCellDef> Editor </th>
        <td mat-cell *matCellDef="let element;let row"> {{element.type != 'previous' ? element.editor : ''}} </td>
      </ng-container>

      <!-- Last Modified Column -->
      <ng-container matColumnDef="lastModified">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Modified </th>
        <td mat-cell *matCellDef="let element;let row"> {{element.lastModified | date : longDate}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr #myRow [attr.data-id]="element.id" mat-row
        *matRowDef="let element;let row;let i = index; columns: displayedColumns;"
        [ngClass]="{'checked' : selection.isSelected(row), 'ele': true}"
        (click)="element.type != 'previous' ? selection.toggle(row) : false">
      </tr>
    </table>
  </div>



  <div id="selectedArea">
    <!--*ngIf = "showUp"-->
    <div *ngIf="showUp" style="position: relative; width: 200px; height: 30px;">
      <div style="position: absolute">

        <ng-container *ngFor="let ele of checkbox | checkedPipe; let i = index;let l = count">

          <p [ngStyle]="{'left.px': i * 5 , 'top.px' : i * 5, 'z-index': 100 - i}" *ngIf="ele">
            {{ELEMENT_DATA[ele.checkedPos].name}}

          </p>
          <span  style="position: absolute; left: 10px; top: 0;z-index: 100;" matBadge="{{l}}"
            matBadgePosition="after"></span>
        </ng-container>
      </div>

    </div>


  </div>

</div>